<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tire suas dúvidas sobre a LGPD</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="./src/css/contato.css">

  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5DZ73RJL');</script>
  <!-- End Google Tag Manager -->

</head>

<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5DZ73RJL" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Contato -->
  <section id="contato">
    <div class="container-contato container">
      <h1>Contato</h1>
      <form id="form" action="https://api.sheetmonkey.io/form/4aAhixWDu5oYWgczGdRbj9" method="post">
        <div class="contato-info">
          <div class="mb-3">
            <label for="nome" class="form-label">Seu nome Completo:</label>
            <input type="form-control" class="form-control required" id="nome" placeholder="Digite seu nome..."
              data-sb-validations="required" name="Nome" oninput="nomeValidacao()">
            <span class="span-required">Seu nome é obrigatório!</span>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Seu e-mail:</label>
            <input type="form-control" class="form-control required" id="email" placeholder="nome@example.com"
              data-sb-validations="required,email" name="Email" oninput="emailValidacao()">
            <span class="span-required">Email obrigatório ou inválido!</span>
          </div>
          <div class="mb-3">
            <label for="nome" class="form-label">Seu número (WhatsApp):</label>
            <input type="tel" class="form-control required" id="tel" placeholder="Digite seu número..."
              data-sb-validations="required" name="Telefone" oninput="telefoneValidacao()">
            <span class="span-required">Telefone obrigatório ou inválido!</span>
          </div>
          <div class="mb-3">
            <label for="message" class="form-label">Mensagem:</label>
            <textarea class="form-control required" id="mensagem" name="Mensagem" type="text"
              placeholder="Enter your message here..." data-sb-validations="required" rows="5"
              oninput="mensagemValidacao()"></textarea>
            <span class="span-required">Mensagem obrigatória!</span>
          </div>
          <div class="form-check">
            <input class="form-check-input required" type="checkbox" value="" id="invalidCheck3"
              aria-describedby="invalidCheck3Feedback" required>
            <label class="form-check-label" for="invalidCheck3" id="invalidCheck3Feedback" class="invalid-feedback">
              Aceito os termos e políticas de privacidade.
            </label>
          </div>
          <div>
            <a href="./politicaPrivacidade.html" target="_blank" id="url">Leia sobre a Política de Privacidade para saber mais sobre
              como tratamos seus dados pessoais.</a>
          </div>
        </div>
        <div>
          <button type="submit" class="btn" id="btn-enviar">Enviar</button>
        </div>
      </form>

    </div>

  </section>


  <script>

    const form = document.getElementById('form');
    const campos = document.querySelectorAll('.required');
    const spans = document.querySelectorAll('.span-required');
    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

    // Função para exibir erro
    function setError(index) {
      campos[index].style.border = '1px solid red';
      spans[index].style.display = 'block';
    }

    // Função para remover erro
    function removeError(index) {
      campos[index].style.border = '';
      spans[index].style.display = 'none';
    }

    // Validação do nome
    function nomeValidacao() {
      if (campos[0].value.length < 3) {
        setError(0);
        return false;
      } else {
        removeError(0);
        return true;
      }
    }

    // Validação do email
    function emailValidacao() {
      if (!emailRegex.test(campos[1].value)) {
        setError(1);
        return false;
      } else {
        removeError(1);
        return true;
      }
    }

    // Validação do telefone
    function telefoneValidacao() {
      if (campos[2].value.length < 11 || campos[2].value.length > 11) {
        setError(2);
        return false;
      } else {
        removeError(2);
        return true;
      }
    }

    // Permitir apenas números no campo de telefone
    function permitirApenasNumeros(event) {
      event.target.value = event.target.value.replace(/\D/g, '');
      telefoneValidacao(); // Chama a validação do telefone após formatar o valor
    }

    // Validação da mensagem
    function mensagemValidacao() {
      if (campos[3].value.length < 2) {
        setError(3);
        return false;
      } else {
        removeError(3);
        return true;
      }
    }

    // Validação do checkbox de termos
    function termosValidacao() {
      const checkbox = document.getElementById('invalidCheck3');
      if (!checkbox.checked) {
        document.getElementById('invalidCheck3Feedback').style.color = 'red';
        return false;
      } else {
        document.getElementById('invalidCheck3Feedback').style.color = '';
        return true;
      }
    }

    // Função para validar todo o formulário
    function validarFormulario() {
      const nomeValido = nomeValidacao();
      const emailValido = emailValidacao();
      const telefoneValido = telefoneValidacao();
      const mensagemValida = mensagemValidacao();
      const termosValidos = termosValidacao();

      // Retorna true apenas se todos os campos estiverem válidos
      return nomeValido && emailValido && telefoneValido && mensagemValida && termosValidos;
    }

    // Adiciona o evento de submit ao formulário
    form.addEventListener('submit', function (event) {
      // Impede o envio do formulário se a validação falhar
      if (!validarFormulario()) {
        event.preventDefault();
      } else {
        alert('Formulário enviado com sucesso!');
      }
    });

    // Adiciona o evento de input para o campo de telefone
    campos[2].addEventListener('input', permitirApenasNumeros);

  </script>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
</body>

</html>